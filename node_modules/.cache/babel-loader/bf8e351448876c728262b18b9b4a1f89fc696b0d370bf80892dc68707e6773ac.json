{"ast":null,"code":"import React,{useState}from'react';import{Line}from'react-chartjs-2';import annotationPlugin from'chartjs-plugin-annotation';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend,annotationPlugin);// Calibrated sigmoid: 3–97% cap, 50/50 at -42, 92% at 0\nconst calibratedSigmoid=d=>{const minCap=0.03;const maxCap=0.97;const d0=-42;const k=0.0686;const raw=1/(1+Math.exp(-k*(d-d0)));return(minCap+(maxCap-minCap)*raw)*100;};export default function DebuffChanceCalculator(){const[accuracy,setAccuracy]=useState(100);const[resistance,setResistance]=useState(100);const[darkMode,setDarkMode]=useState(false);const diff=accuracy-resistance;const chance=calibratedSigmoid(diff);const xValues=Array.from({length:201},(_,i)=>i-100);const yValues=xValues.map(d=>calibratedSigmoid(d));const data={labels:xValues,datasets:[{label:'Debuff Chance (%)',data:yValues,borderColor:'blue',borderWidth:2,fill:false},{label:'Your Input',data:xValues.map(x=>x===diff?chance:null),pointBackgroundColor:'red',pointBorderColor:'red',pointRadius:xValues.map(x=>x===diff?6:0),showLine:false}]};const options={responsive:true,plugins:{legend:{position:'top',labels:{color:darkMode?'white':'black'}},title:{display:true,text:'Debuff Application Chance vs Accuracy - Resistance',color:darkMode?'white':'black'},annotation:{annotations:{fiftyFiftyLine:{type:'line',xMin:-42,xMax:-42,borderColor:'gray',borderDash:[6,6],label:{content:'50/50 Threshold',enabled:true,position:'start',backgroundColor:'gray',color:'white'}},attackerAdvantageLine:{type:'line',xMin:0,xMax:0,borderColor:'green',borderDash:[4,4],label:{content:'Attacker Bias',enabled:true,position:'start',backgroundColor:'green',color:'white'}},tinyChanceZone:{type:'box',yMin:0,yMax:5,backgroundColor:'rgba(255, 0, 0, 0.1)',label:{content:'Tiny chance zone (≤5%)',enabled:true,position:'center',backgroundColor:'red',color:'white'}}}}},scales:{x:{title:{display:true,text:'Accuracy - Resistance',color:darkMode?'white':'black'},ticks:{color:darkMode?'white':'black'}},y:{min:0,max:100,title:{display:true,text:'Chance to Apply Debuff (%)',color:darkMode?'white':'black'},ticks:{color:darkMode?'white':'black'}}}};return/*#__PURE__*/_jsx(\"div\",{className:`p-4 min-h-screen ${darkMode?'bg-black text-white':'bg-white text-black'}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Raid: Debuff Chance Calculator\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDarkMode(!darkMode),className:\"border px-3 py-1 rounded\",children:darkMode?'Light Mode':'Dark Mode'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 mb-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col\",children:[\"Accuracy\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:accuracy,onChange:e=>setAccuracy(Number(e.target.value)),className:\"border p-2 rounded text-black\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col\",children:[\"Resistance\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:resistance,onChange:e=>setResistance(Number(e.target.value)),className:\"border p-2 rounded text-black\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[\"Chance to apply debuff: \",/*#__PURE__*/_jsxs(\"strong\",{children:[chance.toFixed(2),\"%\"]}),' ',\"(\",/*#__PURE__*/_jsxs(\"em\",{children:[\"Accuracy - Resistance = \",diff]}),\")\"]}),/*#__PURE__*/_jsx(Line,{data:data,options:options})]})});}","map":{"version":3,"names":["React","useState","Line","annotationPlugin","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","calibratedSigmoid","d","minCap","maxCap","d0","k","raw","Math","exp","DebuffChanceCalculator","accuracy","setAccuracy","resistance","setResistance","darkMode","setDarkMode","diff","chance","xValues","Array","from","length","_","i","yValues","map","data","labels","datasets","label","borderColor","borderWidth","fill","x","pointBackgroundColor","pointBorderColor","pointRadius","showLine","options","responsive","plugins","legend","position","color","title","display","text","annotation","annotations","fiftyFiftyLine","type","xMin","xMax","borderDash","content","enabled","backgroundColor","attackerAdvantageLine","tinyChanceZone","yMin","yMax","scales","ticks","y","min","max","className","children","onClick","value","onChange","e","Number","target","toFixed"],"sources":["/home/tyrel/projects/debuff-chance-calculator/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport annotationPlugin from 'chartjs-plugin-annotation';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend,\n  annotationPlugin\n);\n\n// Calibrated sigmoid: 3–97% cap, 50/50 at -42, 92% at 0\nconst calibratedSigmoid = (d) => {\n  const minCap = 0.03;\n  const maxCap = 0.97;\n  const d0 = -42;\n  const k = 0.0686;\n  const raw = 1 / (1 + Math.exp(-k * (d - d0)));\n  return (minCap + (maxCap - minCap) * raw) * 100;\n};\n\nexport default function DebuffChanceCalculator() {\n  const [accuracy, setAccuracy] = useState(100);\n  const [resistance, setResistance] = useState(100);\n  const [darkMode, setDarkMode] = useState(false);\n\n  const diff = accuracy - resistance;\n  const chance = calibratedSigmoid(diff);\n\n  const xValues = Array.from({ length: 201 }, (_, i) => i - 100);\n  const yValues = xValues.map(d => calibratedSigmoid(d));\n\n  const data = {\n    labels: xValues,\n    datasets: [\n      {\n        label: 'Debuff Chance (%)',\n        data: yValues,\n        borderColor: 'blue',\n        borderWidth: 2,\n        fill: false,\n      },\n      {\n        label: 'Your Input',\n        data: xValues.map(x => (x === diff ? chance : null)),\n        pointBackgroundColor: 'red',\n        pointBorderColor: 'red',\n        pointRadius: xValues.map(x => (x === diff ? 6 : 0)),\n        showLine: false,\n      },\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: { position: 'top', labels: { color: darkMode ? 'white' : 'black' } },\n      title: {\n        display: true,\n        text: 'Debuff Application Chance vs Accuracy - Resistance',\n        color: darkMode ? 'white' : 'black',\n      },\n      annotation: {\n        annotations: {\n          fiftyFiftyLine: {\n            type: 'line',\n            xMin: -42,\n            xMax: -42,\n            borderColor: 'gray',\n            borderDash: [6, 6],\n            label: {\n              content: '50/50 Threshold',\n              enabled: true,\n              position: 'start',\n              backgroundColor: 'gray',\n              color: 'white',\n            },\n          },\n          attackerAdvantageLine: {\n            type: 'line',\n            xMin: 0,\n            xMax: 0,\n            borderColor: 'green',\n            borderDash: [4, 4],\n            label: {\n              content: 'Attacker Bias',\n              enabled: true,\n              position: 'start',\n              backgroundColor: 'green',\n              color: 'white',\n            },\n          },\n          tinyChanceZone: {\n            type: 'box',\n            yMin: 0,\n            yMax: 5,\n            backgroundColor: 'rgba(255, 0, 0, 0.1)',\n            label: {\n              content: 'Tiny chance zone (≤5%)',\n              enabled: true,\n              position: 'center',\n              backgroundColor: 'red',\n              color: 'white',\n            },\n          },\n        },\n      },\n    },\n    scales: {\n      x: {\n        title: {\n          display: true,\n          text: 'Accuracy - Resistance',\n          color: darkMode ? 'white' : 'black',\n        },\n        ticks: {\n          color: darkMode ? 'white' : 'black',\n        },\n      },\n      y: {\n        min: 0,\n        max: 100,\n        title: {\n          display: true,\n          text: 'Chance to Apply Debuff (%)',\n          color: darkMode ? 'white' : 'black',\n        },\n        ticks: {\n          color: darkMode ? 'white' : 'black',\n        },\n      },\n    },\n  };\n\n  return (\n    <div className={`p-4 min-h-screen ${darkMode ? 'bg-black text-white' : 'bg-white text-black'}`}>\n      <div className=\"max-w-2xl mx-auto\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h1 className=\"text-2xl font-bold\">Raid: Debuff Chance Calculator</h1>\n          <button\n            onClick={() => setDarkMode(!darkMode)}\n            className=\"border px-3 py-1 rounded\"\n          >\n            {darkMode ? 'Light Mode' : 'Dark Mode'}\n          </button>\n        </div>\n\n        <div className=\"flex gap-4 mb-4 flex-wrap\">\n          <label className=\"flex flex-col\">\n            Accuracy\n            <input\n              type=\"number\"\n              value={accuracy}\n              onChange={e => setAccuracy(Number(e.target.value))}\n              className=\"border p-2 rounded text-black\"\n            />\n          </label>\n          <label className=\"flex flex-col\">\n            Resistance\n            <input\n              type=\"number\"\n              value={resistance}\n              onChange={e => setResistance(Number(e.target.value))}\n              className=\"border p-2 rounded text-black\"\n            />\n          </label>\n        </div>\n\n        <p className=\"mb-4\">\n          Chance to apply debuff: <strong>{chance.toFixed(2)}%</strong> \n          {' '}(<em>Accuracy - Resistance = {diff}</em>)\n        </p>\n\n        <Line data={data} options={options} />\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}